
[[blockchains]]
  type = "anvil"
  chain_id = "1337"

[[blockchains]]
  chain_id = "2337"
  port = "8550"
  type = "anvil"

[custom_anvil_miner]
  block_speed_seconds = 5

[jd]
  csa_encryption_key = "d1093c0060d50a3c89c189b2e485da5a3ce57f3dcb38ab7e2c0d5f0bb2314a44" # any random 32 byte hex string
  # change to your version
  image = "job-distributor:0.12.7"

[infra]
  # either "docker" or "crib"
  type = "docker"

[[workflow_configs]]
  feed_id = "018e16c39e000320000000000000000000000000000000000000000000000000"
  workflow_file_location = "../../../../core/scripts/cre/environment/examples/workflows/v1/proof-of-reserve/cron-based/main.go"


[[workflow_configs]]
  feed_id = "018e16c38e000320000000000000000000000000000000000000000000000000"
  workflow_file_location = "../../../../core/scripts/cre/environment/examples/workflows/v1/proof-of-reserve/cron-based/main.go"


[dependencies]
  cron_capability_binary_path = "./cron"


[[nodesets]]
  nodes = 5
  override_mode = "all"
  http_port_range_start = 10100
  name = "workflow"

  [nodesets.db]
    image = "postgres:12.0"
    port = 13000

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      docker_ctx = "../../../.."
      docker_file = "core/chainlink.Dockerfile"
      # image = "chainlink-tmp:latest"
      user_config_overrides = """
      [Log]
      Level = 'debug'
      JSONConsole = true

      # Remove this bit to allow downloading workflows from remote sources
      [CRE.WorkflowFetcher]
      URL = "file:///home/chainlink/workflows"
      """

    [nodesets.node_specs.node.env_vars]
    CL_EVM_CMD=""

[[nodesets]]
  nodes = 2
  override_mode = "all"
  http_port_range_start = 10200
  name = "capabilities"

  [nodesets.db]
    image = "postgres:12.0"
    port = 13100

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      docker_ctx = "../../../.."
      docker_file = "core/chainlink.Dockerfile"
      # image = "chainlink-tmp:latest"
      user_config_overrides = """
      [Log]
      Level = 'debug'
      JSONConsole = true

      # Remove this bit to allow downloading workflows from remote sources
      [CRE.WorkflowFetcher]
      URL = "file:///home/chainlink/workflows"
      """

    [nodesets.node_specs.node.env_vars]
    CL_EVM_CMD=""

[[nodesets]]
  nodes = 1
  override_mode = "all"
  http_port_range_start = 10300
  name = "gateway"

  [nodesets.db]
    image = "postgres:12.0"
    port = 13200

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      docker_ctx = "../../../.."
      docker_file = "core/chainlink.Dockerfile"
      # image = "chainlink-tmp:latest"
      user_config_overrides = """
      [Log]
      Level = 'debug'
      JSONConsole = true

      # Remove this bit to allow downloading workflows from remote sources
      [CRE.WorkflowFetcher]
      URL = "file:///home/chainlink/workflows"
      """

    [nodesets.node_specs.node.env_vars]
    CL_EVM_CMD=""