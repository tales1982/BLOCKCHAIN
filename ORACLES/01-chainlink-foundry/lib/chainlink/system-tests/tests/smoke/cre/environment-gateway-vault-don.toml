[blockchain]
  type = "anvil"
  docker_cmd_params = ["-b", "1"]
  chain_id = "1337"
  port = "8550"

[[nodesets]]
  name = "bootstrap_set"
  nodes = 1
  http_port_range_start = 10100

  [nodesets.db]
    image = "postgres:12.0"
    port = 13002

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      docker_ctx = "../../../../"
      docker_file = "./core/chainlink.Dockerfile"

      user_config_overrides = """
      [Feature]
		  LogPoller = true

      [OCR2]
      Enabled = true

      [P2P.V2]
      Enabled = true
      ListenAddresses = ['0.0.0.0:5004']
      """

      # A port opened for the bootstrap job
      custom_ports = ["5004:5004"]


[[nodesets]]
  name = "gateway_set"
  nodes = 1
  override_mode = "each"
  http_port_range_start = 10200
  
  [nodesets.db]
    image = "postgres:12.0"
    port = 13000

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      docker_ctx = "../../../../"
      docker_file = "./core/chainlink.Dockerfile"

      # A port opened for the gateway job
      custom_ports = ["5002:5002"]

[[nodesets]]
  name = "vault_set"
  nodes = 1
  override_mode = "each"
  http_port_range_start = 10300
  
  [nodesets.db]
    image = "postgres:12.0"
    port = 13001

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      docker_ctx = "../../../../"
      docker_file = "./core/chainlink.Dockerfile"

      user_config_overrides = """
      [OCR2]
      Enabled = true

      [P2P.V2]
      Enabled = true
      ListenAddresses = ['0.0.0.0:5003']
      """

      # A port opened for the vault job
      custom_ports = ["5003:5003"]
